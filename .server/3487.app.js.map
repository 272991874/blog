{"version":3,"file":"3487.app.js","mappings":";;;;;;;;;;;;AAAO;AACP;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EChIA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA;IAAA,mCA4XA,CAIW;UAhYX;QAAA;UAAA,mCA8XA,CAAyB;gBA9XzB;cAAA;;;gBAAA,kCA8XM,cAAY;;;;UA9XlB;;QAAA;UAAA,mCA+XA,CAA+B;gB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","sources":["webpack://yaomin/./docs/.vuepress/.temp/pages/soft/flink_hadoop.html.js","webpack://yaomin/./docs/.vuepress/.temp/pages/soft/flink_hadoop.html.vue","webpack://yaomin/./docs/.vuepress/.temp/pages/soft/flink_hadoop.html.vue?4d99","webpack://yaomin/./docs/.vuepress/.temp/pages/soft/flink_hadoop.html.vue?2c75"],"sourcesContent":["export const data = {\n  \"key\": \"v-169e6309\",\n  \"path\": \"/soft/flink_hadoop.html\",\n  \"title\": \"Flink && Hadoop\",\n  \"lang\": \"zh-CN\",\n  \"frontmatter\": {},\n  \"excerpt\": \"\",\n  \"headers\": [\n    {\n      \"level\": 2,\n      \"title\": \"常用命令\",\n      \"slug\": \"常用命令\",\n      \"children\": []\n    },\n    {\n      \"level\": 2,\n      \"title\": \"一、部署前准备\",\n      \"slug\": \"一、部署前准备\",\n      \"children\": []\n    },\n    {\n      \"level\": 2,\n      \"title\": \"1、创建存放tool的路径\",\n      \"slug\": \"_1、创建存放tool的路径\",\n      \"children\": []\n    },\n    {\n      \"level\": 2,\n      \"title\": \"2、上传文件并解压（flink在主节点上）\",\n      \"slug\": \"_2、上传文件并解压-flink在主节点上\",\n      \"children\": []\n    },\n    {\n      \"level\": 2,\n      \"title\": \"3、通过scp把jdk包和hadoop包分别传到从机并解压\",\n      \"slug\": \"_3、通过scp把jdk包和hadoop包分别传到从机并解压\",\n      \"children\": []\n    },\n    {\n      \"level\": 2,\n      \"title\": \"4、配置环境变量（集群）\",\n      \"slug\": \"_4、配置环境变量-集群\",\n      \"children\": []\n    },\n    {\n      \"level\": 2,\n      \"title\": \"5、修改相关配置文件\",\n      \"slug\": \"_5、修改相关配置文件\",\n      \"children\": [\n        {\n          \"level\": 3,\n          \"title\": \"1）vim flink-conf.yaml\",\n          \"slug\": \"_1-vim-flink-conf-yaml\",\n          \"children\": []\n        },\n        {\n          \"level\": 3,\n          \"title\": \"2）vim core-site.xml\",\n          \"slug\": \"_2-vim-core-site-xml\",\n          \"children\": []\n        },\n        {\n          \"level\": 3,\n          \"title\": \"3)  vim yarn-site.xml\",\n          \"slug\": \"_3-vim-yarn-site-xml\",\n          \"children\": []\n        },\n        {\n          \"level\": 3,\n          \"title\": \"4）vim yarn-env.sh  在最后加一行\",\n          \"slug\": \"_4-vim-yarn-env-sh-在最后加一行\",\n          \"children\": []\n        },\n        {\n          \"level\": 3,\n          \"title\": \"5)  vim mapred-site.xml\",\n          \"slug\": \"_5-vim-mapred-site-xml\",\n          \"children\": []\n        },\n        {\n          \"level\": 3,\n          \"title\": \"6)  vim workers\",\n          \"slug\": \"_6-vim-workers\",\n          \"children\": []\n        },\n        {\n          \"level\": 3,\n          \"title\": \"7）vim hdfs-site.xml\",\n          \"slug\": \"_7-vim-hdfs-site-xml\",\n          \"children\": []\n        },\n        {\n          \"level\": 3,\n          \"title\": \"8）vim  hadoop-env.sh\",\n          \"slug\": \"_8-vim-hadoop-env-sh\",\n          \"children\": []\n        }\n      ]\n    },\n    {\n      \"level\": 2,\n      \"title\": \"6、集群初始化（主节点）\",\n      \"slug\": \"_6、集群初始化-主节点\",\n      \"children\": []\n    },\n    {\n      \"level\": 2,\n      \"title\": \"7、启停服务\",\n      \"slug\": \"_7、启停服务\",\n      \"children\": []\n    },\n    {\n      \"level\": 2,\n      \"title\": \"8、测试\",\n      \"slug\": \"_8、测试\",\n      \"children\": []\n    }\n  ],\n  \"filePathRelative\": \"soft/flink_hadoop.md\",\n  \"git\": {\n    \"contributors\": [\n      {\n        \"name\": \"Amin.Yao\",\n        \"email\": \"Amin.Yao@gaiaworks.cn\",\n        \"commits\": 3\n      }\n    ]\n  }\n}\n","<h1 id=\"flink-hadoop\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#flink-hadoop\" aria-hidden=\"true\">#</a> Flink &amp;&amp; Hadoop</h1>\n<h2 id=\"常用命令\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#常用命令\" aria-hidden=\"true\">#</a> 常用命令</h2>\n<div class=\"language-bash ext-sh line-numbers-mode\"><pre v-pre class=\"language-bash\"><code><span class=\"token comment\"># 用来初始化hadoop</span>\nhadoop namenode -format\n<span class=\"token comment\"># 查看应用列表</span>\n<span class=\"token function\">yarn</span> application --list\n<span class=\"token comment\"># 创建应用 test</span>\nyarn-session.sh -jm <span class=\"token number\">1024</span> -tm <span class=\"token number\">2048</span> -s <span class=\"token number\">10</span> -nm <span class=\"token builtin class-name\">test</span> -d -st\n<span class=\"token comment\"># 终止应用</span>\n<span class=\"token function\">yarn</span> application --kill application_1704300123553_0001\n\njps 查看java应用\n\n<span class=\"token comment\"># 启动所有应用</span>\nstart-all.sh\n<span class=\"token comment\"># 关闭所有应用</span>\nstop-all.sh\n\n\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br><span class=\"line-number\">10</span><br><span class=\"line-number\">11</span><br><span class=\"line-number\">12</span><br><span class=\"line-number\">13</span><br><span class=\"line-number\">14</span><br><span class=\"line-number\">15</span><br><span class=\"line-number\">16</span><br><span class=\"line-number\">17</span><br></div></div><h2 id=\"一、部署前准备\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#一、部署前准备\" aria-hidden=\"true\">#</a> 一、部署前准备</h2>\n<p>1、机器准备 (3台集群标准)</p>\n<p>机器IP\n节点\nCPU&amp;内存\n系统盘\n存储\nxx.xx.xx.xx\nMaster\n8C16G\n100GB\n200GB\nxx.xx.xx.xx\nWorker\n8C16G\n100GB\n200GB\nxx.xx.xx.xx\nWorker\n8C16G\n100GB\n200GB\n2、检查防火墙是否关闭\nsystemctl  status  firewalld\n若关闭，则检查下一项，若开启，则需要执行如下命令\nsystemctl    stop  firewalld      ###临时关闭防火墙，\nsystemctl disable firewalld      ###永久关闭防火墙\n3、检查selinux状态是否是disabled\nsestatus\n若关闭，则检查下一项，若开启，则需要执行如下命令\nsetenforce 0         ###立即生效 ，重启系统后则恢复原状态\n修改 /etc/selinux/config文件中的SELINUX=disabled保存退出后，永久生效，</p>\n<p>4、检查磁盘挂载（存储盘全部挂载）\ndf-h             ###查看磁盘空间</p>\n<p>5、修改主机名（也可不修改）\n1）临时修改   （重启失效）\nhostname   主机名\n2）永久修改主机名（重启不失效）\nhostnamectl set-hostname  主机名\n或者  vim /etc/hostname  删除旧主机名，添加新的\n6、免密登录 （以下路径是示例，根据实际选择路径）\nssh-keygen -t rsa   一路回车</p>\n<pre><code>       cd /home/devops/.ssh/\n       cat id_rsa.pub &gt;&gt;authorized_keys\n       chmod  700 .ssh\n       chmod 600 authorized_keys\n   注：集群的id_rsa.pub要写入authorized_keys中，所涉及的机器都要写入\n</code></pre>\n<p>7、host解析（root用户下，集群机器）\nvim /etc/hosts\nxx.xx.xx.xx     主机名1\nxx.xx.xx.xx     主机名2\nxx.xx.xx.xx     主机名3\n8、创建路径并授权（root用户下，名字自定义，作为挂载路径）\nmkdir /data\nchmod 777 /data</p>\n<h1 id=\"二、详细步骤\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#二、详细步骤\" aria-hidden=\"true\">#</a> 二、详细步骤</h1>\n<h2 id=\"_1、创建存放tool的路径\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1、创建存放tool的路径\" aria-hidden=\"true\">#</a> 1、创建存放tool的路径</h2>\n<p>主机：mkdir /opt/{flink,java,hadoop}\n从机：mkdir /opt/{java,hadoop}</p>\n<h2 id=\"_2、上传文件并解压-flink在主节点上\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2、上传文件并解压-flink在主节点上\" aria-hidden=\"true\">#</a> 2、上传文件并解压（flink在主节点上）</h2>\n<p>从Flink官方网站下载最新版本的Flink二进制发行版。解压缩下载的文件到计算机上的目标文件夹，例如/opt/flink\n在计算机上安装Java运行时环境（JRE）或Java开发工具包（JDK）。Flink需要Java 8或更高版本才能正常运行。例如/opt/java\n安装hadoop集成，例如/opt/hadoop</p>\n<h2 id=\"_3、通过scp把jdk包和hadoop包分别传到从机并解压\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_3、通过scp把jdk包和hadoop包分别传到从机并解压\" aria-hidden=\"true\">#</a> 3、通过scp把jdk包和hadoop包分别传到从机并解压</h2>\n<p>scp -P 端口  jdk-8u341-linux-x64.tar.gz   用户@主机名:/opt/java/\nscp -P 端口  hadoop压缩包   用户@主机名:/opt/hadoop/</p>\n<h2 id=\"_4、配置环境变量-集群\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_4、配置环境变量-集群\" aria-hidden=\"true\">#</a> 4、配置环境变量（集群）</h2>\n<p>在/etc/profile文件最后添加 （代码块中的路径均为例子，按照自己配置的为准）\nexport JAVA_HOME=/opt/java/jdk1.8.0_192\nexport CLASSPATH=.😒{JAVA_HOME}/jre/lib/rt.jar:${JAVA_HOME}/lib/dt.jar:${JAVA_HOME}/lib/tools.jar\nexport PATH=$PATH:$JAVA_HOME/bin</p>\n<p>HADOOP_HOME=/opt/hadoop/hadoop-3.3.1\nexport PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin\nexport HADOOP_PID_DIR=${HADOOP_HOME}/pids</p>\n<p>FLINK_HOME=/opt/flink/flink-1.12.7\nexport PATH=$PATH:$FLINK_HOME/bin</p>\n<p>export HADOOP_CONF_DIR=/opt/hadoop/hadoop-3.3.1/etc/hadoop</p>\n<p>export JAVA_LIBRARY_PATH=$HADOOP_HOME/lib/native</p>\n<p>export FORMAT_MESSAGES_PATTERN_DISABLE_LOOKUPS=true\nsource /etc/profile使其生效</p>\n<h2 id=\"_5、修改相关配置文件\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_5、修改相关配置文件\" aria-hidden=\"true\">#</a> 5、修改相关配置文件</h2>\n<h3 id=\"_1-vim-flink-conf-yaml\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-vim-flink-conf-yaml\" aria-hidden=\"true\">#</a> 1）vim flink-conf.yaml</h3>\n<div class=\"language-properties ext-properties line-numbers-mode\"><pre v-pre class=\"language-properties\"><code>\n<span class=\"token comment\"># The external address of the host on which the JobManager runs and can be</span>\n<span class=\"token comment\"># reached by the TaskManagers and any clients which want to connect. This setting</span>\n<span class=\"token comment\"># is only used in Standalone mode and may be overwritten on the JobManager side</span>\n<span class=\"token comment\"># by specifying the --host &lt;hostname> parameter of the bin/jobmanager.sh executable.</span>\n<span class=\"token comment\"># In high availability mode, if you use the bin/start-cluster.sh script and setup</span>\n<span class=\"token comment\"># the conf/masters file, this will be taken care of automatically. Yarn/Mesos</span>\n<span class=\"token comment\"># automatically configure the host name based on the hostname of the node where the</span>\n<span class=\"token comment\"># JobManager runs.</span>\n\n<span class=\"token attr-name\">jobmanager.rpc.address</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">localhost</span>\n\n<span class=\"token comment\"># The RPC port where the JobManager is reachable.</span>\n\n<span class=\"token attr-name\">jobmanager.rpc.port</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">6123</span>\n\n\n<span class=\"token comment\"># The total process memory size for the JobManager.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># Note this accounts for all memory usage within the JobManager process, including JVM metaspace and other overhead.</span>\n\n<span class=\"token attr-name\">jobmanager.memory.process.size</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">2048m</span>\n\n\n<span class=\"token comment\"># The total process memory size for the TaskManager.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># Note this accounts for all memory usage within the TaskManager process, including JVM metaspace and other overhead.</span>\n\n<span class=\"token attr-name\">taskmanager.memory.process.size</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">4096m</span>\n\n<span class=\"token comment\"># To exclude JVM metaspace and overhead, please, use total Flink memory size instead of 'taskmanager.memory.process.size'.</span>\n<span class=\"token comment\"># It is not recommended to set both 'taskmanager.memory.process.size' and Flink memory.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># taskmanager.memory.flink.size: 1280m</span>\n\n<span class=\"token comment\"># The number of task slots that each TaskManager offers. Each slot runs one parallel pipeline.</span>\n\n<span class=\"token attr-name\">taskmanager.numberOfTaskSlots</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">30</span>\n\n<span class=\"token comment\"># The parallelism used for programs that did not specify and other parallelism.</span>\n\n<span class=\"token attr-name\">parallelism.default</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">10</span>\n<span class=\"token attr-name\">yarn.containers.vcores</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">4</span>\n<span class=\"token attr-name\">yarn.application-attempts</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">10</span>\n\n<span class=\"token comment\"># zookeeper HA</span>\n<span class=\"token attr-name\">high-availability</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">zookeeper</span>\n<span class=\"token attr-name\">high-availability.zookeeper.quorum</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">IP:PORT,IP:PORT,IP:PORT</span>\n<span class=\"token attr-name\">high-availability.storageDir</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">hdfs://主机名:9000/flink-1.12.7/flink/recovery</span>\n<span class=\"token attr-name\">high-availability.zookeeper.path.root</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">/flink-1.12.7</span>\n\n<span class=\"token comment\">#promgateway</span>\n<span class=\"token comment\">#metrics.reporter.promgateway.class: org.apache.flink.metrics.prometheus.PrometheusPushGatewayReporter</span>\n<span class=\"token comment\">#metrics.reporter.promgateway.host: 192.168.3.43</span>\n<span class=\"token comment\">#metrics.reporter.promgateway.port: 9091</span>\n<span class=\"token comment\">#metrics.reporter.promgateway.jobName: DCP-flink-1.9.1</span>\n<span class=\"token comment\">#metrics.reporter.promgateway.randomJobNameSuffix: true</span>\n<span class=\"token comment\">#metrics.reporter.promgateway.deleteOnShutdown: true</span>\n\n\n<span class=\"token comment\">#metrics.reporter.grph.class: org.apache.flink.metrics.graphite.GraphiteReporter</span>\n<span class=\"token comment\">#metrics.reporter.grph.host: 47.101.44.28</span>\n<span class=\"token comment\">#metrics.reporter.grph.port: 2003</span>\n<span class=\"token comment\">#metrics.reporter.grph.protocol: TCP</span>\n<span class=\"token comment\">#metrics</span>\n<span class=\"token attr-name\">metrics.scope.jm</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">&lt;host>.jobmanager</span>\n<span class=\"token attr-name\">metrics.scope.jm.job</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">&lt;host>.jobmanager.&lt;job_name></span>\n<span class=\"token attr-name\">metrics.scope.tm</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">&lt;host>.taskmanager.&lt;tm_id></span>\n<span class=\"token attr-name\">metrics.scope.tm.job</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">&lt;host>.taskmanager.&lt;tm_id>.&lt;job_name></span>\n<span class=\"token attr-name\">metrics.scope.task</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">&lt;host>.taskmanager.&lt;tm_id>.&lt;job_name>.&lt;task_name>.&lt;subtask_index></span>\n<span class=\"token attr-name\">metrics.scope.operator</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">&lt;host>.taskmanager.&lt;tm_id>.&lt;job_name>.&lt;operator_name>.&lt;subtask_index></span>\n\n\n<span class=\"token comment\"># The default file system scheme and authority.</span>\n<span class=\"token comment\"># </span>\n<span class=\"token comment\"># By default file paths without scheme are interpreted relative to the local</span>\n<span class=\"token comment\"># root file system 'file:///'. Use this to override the default and interpret</span>\n<span class=\"token comment\"># relative paths relative to a different file system,</span>\n<span class=\"token comment\"># for example 'hdfs://mynamenode:12345'</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># fs.default-scheme</span>\n\n<span class=\"token comment\">#==============================================================================</span>\n<span class=\"token comment\"># High Availability</span>\n<span class=\"token comment\">#==============================================================================</span>\n\n<span class=\"token comment\"># The high-availability mode. Possible options are 'NONE' or 'zookeeper'.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># high-availability: zookeeper</span>\n\n<span class=\"token comment\"># The path where metadata for master recovery is persisted. While ZooKeeper stores</span>\n<span class=\"token comment\"># the small ground truth for checkpoint and leader election, this location stores</span>\n<span class=\"token comment\"># the larger objects, like persisted dataflow graphs.</span>\n<span class=\"token comment\"># </span>\n<span class=\"token comment\"># Must be a durable file system that is accessible from all nodes</span>\n<span class=\"token comment\"># (like HDFS, S3, Ceph, nfs, ...)</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># high-availability.storageDir: hdfs:///flink/ha/</span>\n\n<span class=\"token comment\"># The list of ZooKeeper quorum peers that coordinate the high-availability</span>\n<span class=\"token comment\"># setup. This must be a list of the form:</span>\n<span class=\"token comment\"># \"host1:clientPort,host2:clientPort,...\" (default clientPort: 2181)</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># high-availability.zookeeper.quorum: localhost:2181</span>\n\n\n<span class=\"token comment\"># ACL options are based on https://zookeeper.apache.org/doc/r3.1.2/zookeeperProgrammers.html#sc_BuiltinACLSchemes</span>\n<span class=\"token comment\"># It can be either \"creator\" (ZOO_CREATE_ALL_ACL) or \"open\" (ZOO_OPEN_ACL_UNSAFE)</span>\n<span class=\"token comment\"># The default value is \"open\" and it can be changed to \"creator\" if ZK security is enabled</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># high-availability.zookeeper.client.acl: open</span>\n\n<span class=\"token comment\">#==============================================================================</span>\n<span class=\"token comment\"># Fault tolerance and checkpointing</span>\n<span class=\"token comment\">#==============================================================================</span>\n\n<span class=\"token comment\"># The backend that will be used to store operator state checkpoints if</span>\n<span class=\"token comment\"># checkpointing is enabled.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># Supported backends are 'jobmanager', 'filesystem', 'rocksdb', or the</span>\n<span class=\"token comment\"># &lt;class-name-of-factory>.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token attr-name\">state.backend</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">filesystem</span>\n\n<span class=\"token comment\"># Directory for checkpoints filesystem, when using any of the default bundled</span>\n<span class=\"token comment\"># state backends.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token attr-name\">state.checkpoints.dir</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">hdfs://主机名:9000/flink-1.12.7/flink-checkpoints</span>\n\n<span class=\"token comment\"># Default target directory for savepoints, optional.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token attr-name\">state.savepoints.dir</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">hdfs://主机名:9000/flink-1.12.7/flink-savepoints</span>\n\n<span class=\"token comment\"># Flag to enable/disable incremental checkpoints for backends that</span>\n<span class=\"token comment\"># support incremental checkpoints (like the RocksDB state backend).</span>\n<span class=\"token comment\">#</span>\n<span class=\"token attr-name\">state.backend.incremental</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">false</span>\n\n<span class=\"token comment\"># The failover strategy, i.e., how the job computation recovers from task failures.</span>\n<span class=\"token comment\"># Only restart tasks that may have been affected by the task failure, which typically includes</span>\n<span class=\"token comment\"># downstream tasks and potentially upstream tasks if their produced data is no longer available for consumption.</span>\n\n<span class=\"token attr-name\">jobmanager.execution.failover-strategy</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">region</span>\n\n<span class=\"token comment\">#==============================================================================</span>\n<span class=\"token comment\"># Rest &amp; web frontend</span>\n<span class=\"token comment\">#==============================================================================</span>\n\n<span class=\"token comment\"># The port to which the REST client connects to. If rest.bind-port has</span>\n<span class=\"token comment\"># not been specified, then the server will bind to this port as well.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token attr-name\">rest.port</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">8081</span>\n\n<span class=\"token comment\"># The address to which the REST client will connect to</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\">#rest.address: 0.0.0.0</span>\n\n<span class=\"token comment\"># Port range for the REST and web server to bind to.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token attr-name\">rest.bind-port</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">8085-8087</span>\n\n<span class=\"token comment\"># The address that the REST &amp; web server binds to</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\">#rest.bind-address: 0.0.0.0</span>\n\n<span class=\"token comment\"># Flag to specify whether job submission is enabled from the web-based</span>\n<span class=\"token comment\"># runtime monitor. Uncomment to disable.</span>\n\n<span class=\"token comment\">#web.submit.enable: false</span>\n<span class=\"token attr-name\">web.tmpdir</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">/opt/flink-1.12/flink-web</span>\n<span class=\"token attr-name\">web.upload.dir</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">/opt/flink-1.12/jars</span>\n\n<span class=\"token comment\">#==============================================================================</span>\n<span class=\"token comment\"># Advanced</span>\n<span class=\"token comment\">#==============================================================================</span>\n\n<span class=\"token comment\"># Override the directories for temporary files. If not specified, the</span>\n<span class=\"token comment\"># system-specific Java temporary directory (java.io.tmpdir property) is taken.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># For framework setups on Yarn or Mesos, Flink will automatically pick up the</span>\n<span class=\"token comment\"># containers' temp directories without any need for configuration.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># Add a delimited list for multiple directories, using the system directory</span>\n<span class=\"token comment\"># delimiter (colon ':' on unix) or a comma, e.g.:</span>\n<span class=\"token comment\">#     /data1/tmp:/data/tmp:/data3/tmp</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># Note: Each directory entry is read from and written to by a different I/O</span>\n<span class=\"token comment\"># thread. You can include the same directory multiple times in order to create</span>\n<span class=\"token comment\"># multiple I/O threads against that directory. This is for example relevant for</span>\n<span class=\"token comment\"># high-throughput RAIDs.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># io.tmp.dirs: /tmp</span>\n\n<span class=\"token comment\"># The classloading resolve order. Possible values are 'child-first' (Flink's default)</span>\n<span class=\"token comment\"># and 'parent-first' (Java's default).</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># Child first classloading allows users to use different dependency/library</span>\n<span class=\"token comment\"># versions in their application than those in the classpath. Switching back</span>\n<span class=\"token comment\"># to 'parent-first' may help with debugging dependency issues.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># classloader.resolve-order: child-first</span>\n\n<span class=\"token comment\"># The amount of memory going to the network stack. These numbers usually need</span>\n<span class=\"token comment\"># no tuning. Adjusting them may be necessary in case of an \"Insufficient number</span>\n<span class=\"token comment\"># of network buffers\" error. The default min is 64MB, the default max is 1GB.</span>\n<span class=\"token comment\"># </span>\n<span class=\"token comment\"># taskmanager.memory.network.fraction: 0.1</span>\n<span class=\"token comment\"># taskmanager.memory.network.min: 64mb</span>\n<span class=\"token comment\"># taskmanager.memory.network.max: 1gb</span>\n\n<span class=\"token comment\"># flink自己管理内存，系数，默认0.4</span>\n<span class=\"token attr-name\">taskmanager.memory.managed.fraction</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">0.1</span>\n<span class=\"token comment\"># flink网络缓冲区，最大值，1GB</span>\n<span class=\"token attr-name\">taskmanager.memory.network.max</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">200mb</span>\n<span class=\"token comment\"># flink jvm元数据大小，默认96</span>\n<span class=\"token attr-name\">taskmanager.memory.jvm-metaspace.size</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">256mb</span>\n\n<span class=\"token comment\">#==============================================================================</span>\n<span class=\"token comment\"># Flink Cluster Security Configuration</span>\n<span class=\"token comment\">#==============================================================================</span>\n\n<span class=\"token comment\"># Kerberos authentication for various components - Hadoop, ZooKeeper, and connectors -</span>\n<span class=\"token comment\"># may be enabled in four steps:</span>\n<span class=\"token comment\"># 1. configure the local krb5.conf file</span>\n<span class=\"token comment\"># 2. provide Kerberos credentials (either a keytab or a ticket cache w/ kinit)</span>\n<span class=\"token comment\"># 3. make the credentials available to various JAAS login contexts</span>\n<span class=\"token comment\"># 4. configure the connector to use JAAS/SASL</span>\n\n<span class=\"token comment\"># The below configure how Kerberos credentials are provided. A keytab will be used instead of</span>\n<span class=\"token comment\"># a ticket cache if the keytab path and principal are set.</span>\n\n<span class=\"token comment\"># security.kerberos.login.use-ticket-cache: true</span>\n<span class=\"token comment\"># security.kerberos.login.keytab: /path/to/kerberos/keytab</span>\n<span class=\"token comment\"># security.kerberos.login.principal: flink-user</span>\n\n<span class=\"token comment\"># The configuration below defines which JAAS login contexts</span>\n\n<span class=\"token comment\"># security.kerberos.login.contexts: Client,KafkaClient</span>\n\n<span class=\"token comment\">#==============================================================================</span>\n<span class=\"token comment\"># ZK Security Configuration</span>\n<span class=\"token comment\">#==============================================================================</span>\n\n<span class=\"token comment\"># Below configurations are applicable if ZK ensemble is configured for security</span>\n\n<span class=\"token comment\"># Override below configuration to provide custom ZK service name if configured</span>\n<span class=\"token comment\"># zookeeper.sasl.service-name: zookeeper</span>\n\n<span class=\"token comment\"># The configuration below must match one of the values set in \"security.kerberos.login.contexts\"</span>\n<span class=\"token comment\"># zookeeper.sasl.login-context-name: Client</span>\n\n<span class=\"token comment\">#==============================================================================</span>\n<span class=\"token comment\"># HistoryServer</span>\n<span class=\"token comment\">#==============================================================================</span>\n\n<span class=\"token comment\"># The HistoryServer is started and stopped via bin/historyserver.sh (start|stop)</span>\n\n<span class=\"token comment\"># Directory to upload completed jobs to. Add this directory to the list of</span>\n<span class=\"token comment\"># monitored directories of the HistoryServer as well (see below).</span>\n<span class=\"token attr-name\">jobmanager.archive.fs.dir</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">hdfs://flinkp1:9000/flink-1.12.7/completed-jobs</span>\n\n<span class=\"token comment\"># The address under which the web-based HistoryServer listens.</span>\n<span class=\"token comment\">#historyserver.web.address: 0.0.0.0</span>\n\n<span class=\"token comment\"># The port under which the web-based HistoryServer listens.</span>\n<span class=\"token comment\">#historyserver.web.port: 8082</span>\n\n<span class=\"token comment\"># Comma separated list of directories to monitor for completed jobs.</span>\n<span class=\"token attr-name\">historyserver.archive.fs.dir</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">hdfs://flinkp1:9000/flink-1.12.7/completed-jobs</span>\n\n<span class=\"token comment\"># Interval in milliseconds for refreshing the monitored directories.</span>\n<span class=\"token attr-name\">historyserver.archive.fs.refresh-interval</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">10000</span>\n\n<span class=\"token attr-name\">restart-strategy.failure-rate.max-failures-per-interval</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">3</span>\n<span class=\"token attr-name\">restart-strategy.failure-rate.failure-rate-interval</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">5 min</span>\n<span class=\"token attr-name\">restart-strategy.failure-rate.delay</span><span class=\"token punctuation\">:</span> <span class=\"token attr-value\">10 s</span>\n\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br><span class=\"line-number\">10</span><br><span class=\"line-number\">11</span><br><span class=\"line-number\">12</span><br><span class=\"line-number\">13</span><br><span class=\"line-number\">14</span><br><span class=\"line-number\">15</span><br><span class=\"line-number\">16</span><br><span class=\"line-number\">17</span><br><span class=\"line-number\">18</span><br><span class=\"line-number\">19</span><br><span class=\"line-number\">20</span><br><span class=\"line-number\">21</span><br><span class=\"line-number\">22</span><br><span class=\"line-number\">23</span><br><span class=\"line-number\">24</span><br><span class=\"line-number\">25</span><br><span class=\"line-number\">26</span><br><span class=\"line-number\">27</span><br><span class=\"line-number\">28</span><br><span class=\"line-number\">29</span><br><span class=\"line-number\">30</span><br><span class=\"line-number\">31</span><br><span class=\"line-number\">32</span><br><span class=\"line-number\">33</span><br><span class=\"line-number\">34</span><br><span class=\"line-number\">35</span><br><span class=\"line-number\">36</span><br><span class=\"line-number\">37</span><br><span class=\"line-number\">38</span><br><span class=\"line-number\">39</span><br><span class=\"line-number\">40</span><br><span class=\"line-number\">41</span><br><span class=\"line-number\">42</span><br><span class=\"line-number\">43</span><br><span class=\"line-number\">44</span><br><span class=\"line-number\">45</span><br><span class=\"line-number\">46</span><br><span class=\"line-number\">47</span><br><span class=\"line-number\">48</span><br><span class=\"line-number\">49</span><br><span class=\"line-number\">50</span><br><span class=\"line-number\">51</span><br><span class=\"line-number\">52</span><br><span class=\"line-number\">53</span><br><span class=\"line-number\">54</span><br><span class=\"line-number\">55</span><br><span class=\"line-number\">56</span><br><span class=\"line-number\">57</span><br><span class=\"line-number\">58</span><br><span class=\"line-number\">59</span><br><span class=\"line-number\">60</span><br><span class=\"line-number\">61</span><br><span class=\"line-number\">62</span><br><span class=\"line-number\">63</span><br><span class=\"line-number\">64</span><br><span class=\"line-number\">65</span><br><span class=\"line-number\">66</span><br><span class=\"line-number\">67</span><br><span class=\"line-number\">68</span><br><span class=\"line-number\">69</span><br><span class=\"line-number\">70</span><br><span class=\"line-number\">71</span><br><span class=\"line-number\">72</span><br><span class=\"line-number\">73</span><br><span class=\"line-number\">74</span><br><span class=\"line-number\">75</span><br><span class=\"line-number\">76</span><br><span class=\"line-number\">77</span><br><span class=\"line-number\">78</span><br><span class=\"line-number\">79</span><br><span class=\"line-number\">80</span><br><span class=\"line-number\">81</span><br><span class=\"line-number\">82</span><br><span class=\"line-number\">83</span><br><span class=\"line-number\">84</span><br><span class=\"line-number\">85</span><br><span class=\"line-number\">86</span><br><span class=\"line-number\">87</span><br><span class=\"line-number\">88</span><br><span class=\"line-number\">89</span><br><span class=\"line-number\">90</span><br><span class=\"line-number\">91</span><br><span class=\"line-number\">92</span><br><span class=\"line-number\">93</span><br><span class=\"line-number\">94</span><br><span class=\"line-number\">95</span><br><span class=\"line-number\">96</span><br><span class=\"line-number\">97</span><br><span class=\"line-number\">98</span><br><span class=\"line-number\">99</span><br><span class=\"line-number\">100</span><br><span class=\"line-number\">101</span><br><span class=\"line-number\">102</span><br><span class=\"line-number\">103</span><br><span class=\"line-number\">104</span><br><span class=\"line-number\">105</span><br><span class=\"line-number\">106</span><br><span class=\"line-number\">107</span><br><span class=\"line-number\">108</span><br><span class=\"line-number\">109</span><br><span class=\"line-number\">110</span><br><span class=\"line-number\">111</span><br><span class=\"line-number\">112</span><br><span class=\"line-number\">113</span><br><span class=\"line-number\">114</span><br><span class=\"line-number\">115</span><br><span class=\"line-number\">116</span><br><span class=\"line-number\">117</span><br><span class=\"line-number\">118</span><br><span class=\"line-number\">119</span><br><span class=\"line-number\">120</span><br><span class=\"line-number\">121</span><br><span class=\"line-number\">122</span><br><span class=\"line-number\">123</span><br><span class=\"line-number\">124</span><br><span class=\"line-number\">125</span><br><span class=\"line-number\">126</span><br><span class=\"line-number\">127</span><br><span class=\"line-number\">128</span><br><span class=\"line-number\">129</span><br><span class=\"line-number\">130</span><br><span class=\"line-number\">131</span><br><span class=\"line-number\">132</span><br><span class=\"line-number\">133</span><br><span class=\"line-number\">134</span><br><span class=\"line-number\">135</span><br><span class=\"line-number\">136</span><br><span class=\"line-number\">137</span><br><span class=\"line-number\">138</span><br><span class=\"line-number\">139</span><br><span class=\"line-number\">140</span><br><span class=\"line-number\">141</span><br><span class=\"line-number\">142</span><br><span class=\"line-number\">143</span><br><span class=\"line-number\">144</span><br><span class=\"line-number\">145</span><br><span class=\"line-number\">146</span><br><span class=\"line-number\">147</span><br><span class=\"line-number\">148</span><br><span class=\"line-number\">149</span><br><span class=\"line-number\">150</span><br><span class=\"line-number\">151</span><br><span class=\"line-number\">152</span><br><span class=\"line-number\">153</span><br><span class=\"line-number\">154</span><br><span class=\"line-number\">155</span><br><span class=\"line-number\">156</span><br><span class=\"line-number\">157</span><br><span class=\"line-number\">158</span><br><span class=\"line-number\">159</span><br><span class=\"line-number\">160</span><br><span class=\"line-number\">161</span><br><span class=\"line-number\">162</span><br><span class=\"line-number\">163</span><br><span class=\"line-number\">164</span><br><span class=\"line-number\">165</span><br><span class=\"line-number\">166</span><br><span class=\"line-number\">167</span><br><span class=\"line-number\">168</span><br><span class=\"line-number\">169</span><br><span class=\"line-number\">170</span><br><span class=\"line-number\">171</span><br><span class=\"line-number\">172</span><br><span class=\"line-number\">173</span><br><span class=\"line-number\">174</span><br><span class=\"line-number\">175</span><br><span class=\"line-number\">176</span><br><span class=\"line-number\">177</span><br><span class=\"line-number\">178</span><br><span class=\"line-number\">179</span><br><span class=\"line-number\">180</span><br><span class=\"line-number\">181</span><br><span class=\"line-number\">182</span><br><span class=\"line-number\">183</span><br><span class=\"line-number\">184</span><br><span class=\"line-number\">185</span><br><span class=\"line-number\">186</span><br><span class=\"line-number\">187</span><br><span class=\"line-number\">188</span><br><span class=\"line-number\">189</span><br><span class=\"line-number\">190</span><br><span class=\"line-number\">191</span><br><span class=\"line-number\">192</span><br><span class=\"line-number\">193</span><br><span class=\"line-number\">194</span><br><span class=\"line-number\">195</span><br><span class=\"line-number\">196</span><br><span class=\"line-number\">197</span><br><span class=\"line-number\">198</span><br><span class=\"line-number\">199</span><br><span class=\"line-number\">200</span><br><span class=\"line-number\">201</span><br><span class=\"line-number\">202</span><br><span class=\"line-number\">203</span><br><span class=\"line-number\">204</span><br><span class=\"line-number\">205</span><br><span class=\"line-number\">206</span><br><span class=\"line-number\">207</span><br><span class=\"line-number\">208</span><br><span class=\"line-number\">209</span><br><span class=\"line-number\">210</span><br><span class=\"line-number\">211</span><br><span class=\"line-number\">212</span><br><span class=\"line-number\">213</span><br><span class=\"line-number\">214</span><br><span class=\"line-number\">215</span><br><span class=\"line-number\">216</span><br><span class=\"line-number\">217</span><br><span class=\"line-number\">218</span><br><span class=\"line-number\">219</span><br><span class=\"line-number\">220</span><br><span class=\"line-number\">221</span><br><span class=\"line-number\">222</span><br><span class=\"line-number\">223</span><br><span class=\"line-number\">224</span><br><span class=\"line-number\">225</span><br><span class=\"line-number\">226</span><br><span class=\"line-number\">227</span><br><span class=\"line-number\">228</span><br><span class=\"line-number\">229</span><br><span class=\"line-number\">230</span><br><span class=\"line-number\">231</span><br><span class=\"line-number\">232</span><br><span class=\"line-number\">233</span><br><span class=\"line-number\">234</span><br><span class=\"line-number\">235</span><br><span class=\"line-number\">236</span><br><span class=\"line-number\">237</span><br><span class=\"line-number\">238</span><br><span class=\"line-number\">239</span><br><span class=\"line-number\">240</span><br><span class=\"line-number\">241</span><br><span class=\"line-number\">242</span><br><span class=\"line-number\">243</span><br><span class=\"line-number\">244</span><br><span class=\"line-number\">245</span><br><span class=\"line-number\">246</span><br><span class=\"line-number\">247</span><br><span class=\"line-number\">248</span><br><span class=\"line-number\">249</span><br><span class=\"line-number\">250</span><br><span class=\"line-number\">251</span><br><span class=\"line-number\">252</span><br><span class=\"line-number\">253</span><br><span class=\"line-number\">254</span><br><span class=\"line-number\">255</span><br><span class=\"line-number\">256</span><br><span class=\"line-number\">257</span><br><span class=\"line-number\">258</span><br><span class=\"line-number\">259</span><br><span class=\"line-number\">260</span><br><span class=\"line-number\">261</span><br><span class=\"line-number\">262</span><br><span class=\"line-number\">263</span><br><span class=\"line-number\">264</span><br><span class=\"line-number\">265</span><br><span class=\"line-number\">266</span><br><span class=\"line-number\">267</span><br><span class=\"line-number\">268</span><br><span class=\"line-number\">269</span><br><span class=\"line-number\">270</span><br><span class=\"line-number\">271</span><br><span class=\"line-number\">272</span><br><span class=\"line-number\">273</span><br><span class=\"line-number\">274</span><br><span class=\"line-number\">275</span><br><span class=\"line-number\">276</span><br><span class=\"line-number\">277</span><br></div></div><h3 id=\"_2-vim-core-site-xml\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-vim-core-site-xml\" aria-hidden=\"true\">#</a> 2）vim core-site.xml</h3>\n<property>\n<!-- 配置HDFS的NameNode所在节点服务器 -->\n<name>fs.defaultFS</name>\n<value>hdfs://主机名1:9000</value>\n</property>\n<property>\n<!-- 配置Hadoop的临时目录 -->\n<name>hadoop.tmp.dir</name>\n<value>file:/data/hadoop/tmp</value>\n<description>Abase for other temporary directories.</description>\n</property>\n<h3 id=\"_3-vim-yarn-site-xml\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_3-vim-yarn-site-xml\" aria-hidden=\"true\">#</a> 3)  vim yarn-site.xml</h3>\n<configuration>\n<!-- Site specific YARN configuration properties -->\n   <property>\n        <name>yarn.nodemanager.aux-services</name>\n        <value>mapreduce_shuffle</value>\n    </property>\n<pre><code>&lt;property&gt;\n    &lt;!-- 配置ResourceManager的服务节点 --&gt;\n    &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;\n    &lt;value&gt;主机名1&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;property&gt;\n    &lt;name&gt;yarn.resourcemanager.address&lt;/name&gt;\n    &lt;value&gt;主机名1:8032&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;property&gt;\n    &lt;name&gt;yarn.resourcemanager.webapp.address&lt;/name&gt;\n    &lt;value&gt;主机名1:8088&lt;/value&gt;\n&lt;/property&gt;\n\n    &lt;!-- 配置当前节点yarn的可用资源 start --&gt;\n&lt;property&gt;\n    &lt;name&gt;yarn.nodemanager.resource.cpu-vcores&lt;/name&gt;\n       &lt;value&gt;15&lt;/value&gt;\n&lt;/property&gt;\n\n    &lt;property&gt;\n    &lt;name&gt;yarn.nodemanager.resource.memory-mb&lt;/name&gt;\n       &lt;value&gt;30000&lt;/value&gt;\n&lt;/property&gt;\n    &lt;!-- 配置当前节点yarn的可用资源 end --&gt;\n\n\n    &lt;!-- 任务资源分配规则 start --&gt;\n&lt;property&gt;\n    &lt;name&gt;yarn.scheduler.minimum-allocation-vcores&lt;/name&gt;\n       &lt;value&gt;1&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;property&gt;\n    &lt;name&gt;yarn.scheduler.maximum-allocation-vcores&lt;/name&gt;\n       &lt;value&gt;4&lt;/value&gt;\n&lt;/property&gt;\n    &lt;!-- 任务资源分配规则 end --&gt;\n\n\n    &lt;property&gt;\n    &lt;name&gt;yarn.log-aggregation-enable&lt;/name&gt;\n       &lt;value&gt;true&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;property&gt;\n      &lt;name&gt;yarn.nodemanager.vmem-check-enabled&lt;/name&gt;\n      &lt;value&gt;false&lt;/value&gt;\n      &lt;description&gt;Whether virtual memory limits will be enforced for containers.&lt;/description&gt;\n&lt;/property&gt;\n\n    &lt;property&gt;\n      &lt;name&gt;yarn.resourcemanager.am.max-attempts&lt;/name&gt;\n      &lt;value&gt;10&lt;/value&gt;\n      &lt;description&gt;\n            The maximum number of application master execution attempts.\n      &lt;/description&gt;\n    &lt;/property&gt;\n\n    &lt;!-- 配置RM重启保存yarn上job状态 start --&gt;\n     &lt;property&gt;\n       &lt;description&gt;Enable RM to recover state after starting. If true, then\n       yarn.resourcemanager.store.class must be specified&lt;/description&gt;\n       &lt;name&gt;yarn.resourcemanager.recovery.enabled&lt;/name&gt;\n       &lt;value&gt;true&lt;/value&gt;\n     &lt;/property&gt;\n\n     &lt;property&gt;\n       &lt;description&gt;The class to use as the persistent store.&lt;/description&gt;\n       &lt;name&gt;yarn.resourcemanager.store.class&lt;/name&gt;\n       &lt;value&gt;org.apache.hadoop.yarn.server.resourcemanager.recovery.FileSystemRMStateStore&lt;/value&gt;\n     &lt;/property&gt;\n\n     &lt;property&gt;\n       &lt;name&gt;yarn.resourcemanager.fs.state-store.uri&lt;/name&gt;\n       &lt;value&gt;${hadoop.tmp.dir}/yarn/system/rmstore&lt;/value&gt;\n     &lt;/property&gt;\n    &lt;!-- 配置RM重启保存yarn上job状态 end --&gt;\n</code></pre>\n</configuration>\n<h3 id=\"_4-vim-yarn-env-sh-在最后加一行\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_4-vim-yarn-env-sh-在最后加一行\" aria-hidden=\"true\">#</a> 4）vim yarn-env.sh  在最后加一行</h3>\n<p>export JAVA_HOME=/opt/jdk1.8.0_192</p>\n<h3 id=\"_5-vim-mapred-site-xml\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_5-vim-mapred-site-xml\" aria-hidden=\"true\">#</a> 5)  vim mapred-site.xml</h3>\n<property>\n<!-- 配置MR运行的环境 -->\n<name>mapreduce.framework.name</name>\n<value>yarn</value>\n</property>\n<property>\n<name>mapreduce.application.classpath</name>\n<value>\n/home/devops/hadoop/hadoop-3.3.1/etc/hadoop,\n/home/devops/hadoop/hadoop-3.3.1/share/hadoop/common/*,\n/home/devops/hadoop/hadoop-3.3.1/share/hadoop/common/lib/*,\n/home/devops/hadoop/hadoop-3.3.1/share/hadoop/hdfs/*,\n/home/devops/hadoop/hadoop-3.3.1/share/hadoop/hdfs/lib/*,\n/home/devops/hadoop/hadoop-3.3.1/share/hadoop/mapreduce/*,\n/home/devops/hadoop/hadoop-3.3.1/share/hadoop/mapreduce/lib/*,\n/home/devops/hadoop/hadoop-3.3.1/share/hadoop/yarn/*,\n/home/devops/hadoop/hadoop-3.3.1/share/hadoop/yarn/lib/*\n</value>\n</property>\n<h3 id=\"_6-vim-workers\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_6-vim-workers\" aria-hidden=\"true\">#</a> 6)  vim workers</h3>\n<pre><code>                主机名1\n                主机名2\n                主机名3\n</code></pre>\n<h3 id=\"_7-vim-hdfs-site-xml\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_7-vim-hdfs-site-xml\" aria-hidden=\"true\">#</a> 7）vim hdfs-site.xml</h3>\n  <configuration>\n        <property>\n        <!-- 配置HDFS的DataNode的备份数量 -->\n        <name>dfs.replication</name>\n        <value>3</value>\n    </property>\n    <property>\n        <name>dfs.namenode.name.dir</name>\n        <value>file:/data/hadoop/hdfs/name</value>\n    </property>\n    <property>\n        <name>dfs.datanode.data.dir</name>\n        <value>file:/data/hadoop/hdfs/data</value>\n    </property>\n    <property>\n        <!-- 配置HDFS的权限控制 -->\n        <name>dfs.permissions.enabled</name>\n        <value>false</value>\n    </property>\n    <property>\n        <!-- 配置SecondaryNameNode的节点地址 -->\n        <name>dfs.namenode.secondary.http-address</name>\n        <value>主机名2:9868</value>\n    </property>\n<pre><code>    &lt;property&gt;\n      &lt;name&gt;dfs.http.address&lt;/name&gt;\n      &lt;value&gt;0.0.0.0:50070&lt;/value&gt;\n    &lt;/property&gt;\n</code></pre>\n</configuration>\n<h3 id=\"_8-vim-hadoop-env-sh\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_8-vim-hadoop-env-sh\" aria-hidden=\"true\">#</a> 8）vim  hadoop-env.sh</h3>\n<p>export JAVA_HOME=/opt/java/jdk1.8.0_341</p>\n<p>export HADOOP_CONF_DIR=/opt/hadoop/hadoop-3.3.1/etc/hadoop</p>\n<p>export HADOOP_OS_TYPE=${HADOOP_OS_TYPE:-$(uname -s)}\nexport HADOOP_LOG_DIR=/data/hadoop/logs</p>\n<p>export HADOOP_SSH_OPTS=&quot;-p 10086&quot;    ##指定port.默认22号端口则不要加</p>\n<p>注：hadoop,java 集群都需要装，可以在主机上修改完配置文件，scp到其他机器上，也可以一台一台修改</p>\n<h2 id=\"_6、集群初始化-主节点\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_6、集群初始化-主节点\" aria-hidden=\"true\">#</a> 6、集群初始化（主节点）</h2>\n<p>hadoop namenode -format</p>\n<h2 id=\"_7、启停服务\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_7、启停服务\" aria-hidden=\"true\">#</a> 7、启停服务</h2>\n<p>start-all.sh\nstop-all.sh\n注：如果启动失败\n先stop-all.sh，把/data/tmp/dfs 缓存文件 启动失败后需把缓存文件删除 已创建了uuid\n把/data/hadoop/hdfs/  删除  （新建yid失败，datanode节点未起来，因为该目录下保留了以前的id）</p>\n<pre><code>         在进行初始化 hadoop namenode -format\n         ###强制退出安全策略\n          hdfs dfsadmin -safemode leave\n</code></pre>\n<h2 id=\"_8、测试\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_8、测试\" aria-hidden=\"true\">#</a> 8、测试</h2>\n<pre><code>         yarn-session.sh -jm 1024 -tm 2048 -s 10 -nm test -d -st、\n         可以通过访问http://localhost:8081查看Flink Web控制台\n</code></pre>\n","export * from \"-!../../../../../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[1]!../../../../../node_modules/@vuepress/bundler-webpack/lib/build/ssr/vuepressLoader.js!../../../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./flink_hadoop.html.vue?vue&type=template&id=50653d56\"","import { ssrRender } from \"./flink_hadoop.html.vue?vue&type=template&id=50653d56\"\nconst script = {}\nimport { ssrContextKey } from 'vue'\nscript.ssrRender = (...args) => {\n  const ssrContext = args[2].appContext.provides[ssrContextKey]\n  ssrContext._registeredComponents.add(\"D:\\\\yaomin\\\\WorkSpace\\\\yaomin_java2\\\\node_modules\\\\@vuepress\\\\bundler-webpack\\\\lib\\\\build\\\\ssr\\\\vuepressLoader.js!D:\\\\yaomin\\\\WorkSpace\\\\yaomin_java2\\\\node_modules\\\\vue-loader\\\\dist\\\\index.js??ruleSet[0].use[1]!D:\\\\yaomin\\\\WorkSpace\\\\yaomin_java2\\\\docs\\\\.vuepress\\\\.temp\\\\pages\\\\soft\\\\flink_hadoop.html.vue\")\n  return ssrRender(...args)\n}\n\n\nexport default script"],"names":[],"sourceRoot":""}