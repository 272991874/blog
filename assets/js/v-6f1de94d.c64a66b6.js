"use strict";(self.webpackChunkyaomin=self.webpackChunkyaomin||[]).push([[6671],{6251:(t,d,e)=>{e.r(d),e.d(d,{data:()=>s});const s={key:"v-6f1de94d",path:"/soft/docker.html",title:"Dcoker",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:3,title:"问题调试",slug:"问题调试",children:[]},{level:2,title:"docker安装软件记录",slug:"docker安装软件记录",children:[{level:3,title:"Redis",slug:"redis",children:[]}]},{level:2,title:"MySql",slug:"mysql",children:[]},{level:2,title:"Tomcat",slug:"tomcat",children:[]},{level:2,title:"Docker指令",slug:"docker指令",children:[{level:3,title:"容器操作",slug:"容器操作",children:[]},{level:3,title:"容器rootfs命令",slug:"容器rootfs命令",children:[]}]}],filePathRelative:"soft/docker.md",git:{contributors:[{name:"yaomin",email:"272991874@qq.com",commits:2},{name:"yaomin_java",email:"272991874@qq.com",commits:1}]}}},1829:(t,d,e)=>{e.r(d),e.d(d,{default:()=>b});var s=e(6252);const a=(0,s._)("h1",{id:"dcoker",tabindex:"-1"},[(0,s._)("a",{class:"header-anchor",href:"#dcoker","aria-hidden":"true"},"#"),(0,s.Uk)(" Dcoker")],-1),n={class:"table-of-contents"},r=(0,s.Uk)("问题调试"),l=(0,s.Uk)("docker安装软件记录"),c=(0,s.Uk)("Redis"),i=(0,s.Uk)("MySql"),o=(0,s.Uk)("Tomcat"),p=(0,s.Uk)("Docker指令"),u=(0,s.Uk)("容器操作"),m=(0,s.Uk)("容器rootfs命令"),h=(0,s.uE)('<p>##docker 调试</p><ul><li>换源</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#vi /etc/docker/daemon.json</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>\n<span class="token property">&quot;registry-mirrors&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;https://registry.docker-cn.com&quot;</span><span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="问题调试" tabindex="-1"><a class="header-anchor" href="#问题调试" aria-hidden="true">#</a> 问题调试</h3><ul><li>启动时提示</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>WARNING: IPv4 forwarding is disabled. Networking will not work.\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>修改配置文件</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> /usr/lib/sysctl.d/00-system.conf\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>追加</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>net.ipv4.ip_forward<span class="token operator">=</span><span class="token number">1</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>重启网络</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl restart network\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="docker安装软件记录" tabindex="-1"><a class="header-anchor" href="#docker安装软件记录" aria-hidden="true">#</a> docker安装软件记录</h2><h3 id="redis" tabindex="-1"><a class="header-anchor" href="#redis" aria-hidden="true">#</a> Redis</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>docker pull redis <span class="token comment">#拉取redis</span>\ndocker run -p <span class="token number">6379</span>:6379 -idt --name redis redis <span class="token comment">#启动redis</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>或直接</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>docker run -p <span class="token number">6379</span>:6379 -idt --name redis redis <span class="token comment">#启动redis</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>以下省略详细步骤</p><h2 id="mysql" tabindex="-1"><a class="header-anchor" href="#mysql" aria-hidden="true">#</a> MySql</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>docker run -itd <span class="token punctuation">\\</span>\n--name mysql <span class="token punctuation">\\</span>\n-p <span class="token number">3306</span>:3306 <span class="token punctuation">\\</span>\n--restart<span class="token operator">=</span>always <span class="token punctuation">\\</span>\n-e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token string">&#39;root&#39;</span> <span class="token punctuation">\\</span>\nmysql:5.7 <span class="token punctuation">\\</span>\n--lower_case_table_names<span class="token operator">=</span><span class="token number">1</span>\n <span class="token comment">#启动MySQL</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="tomcat" tabindex="-1"><a class="header-anchor" href="#tomcat" aria-hidden="true">#</a> Tomcat</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>docker run -idt --name tomcat -p <span class="token number">80</span>:8080 -v /server/tomcat/webapps/:/usr/local/tomcat/webapps/ tomcat\n<span class="token comment">#将本机/server/tomcat/webapps/映射到容器/usr/local/tomcat/webapps/</span>\n<span class="token comment">#将容器8080端口映射到本机80端口</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="docker指令" tabindex="-1"><a class="header-anchor" href="#docker指令" aria-hidden="true">#</a> Docker指令</h2><ul><li><p>菜鸟教程：命令大全</p></li><li><p>常用指令<br> docker生命周期管理</p></li></ul><table><thead><tr><th>命令</th><th>参数</th><th>功能</th><th>示例</th></tr></thead><tbody><tr><td>run</td><td>1</td><td>创建一个容器</td><td>docker run 创建容器的镜像</td></tr><tr><td></td><td>-p</td><td>端口映射</td><td>-p 宿主端口:容器端口</td></tr><tr><td>-v</td><td></td><td>挂载 -v 宿主目录:容器目录</td><td></td></tr><tr><td>-i</td><td></td><td>以交互模式运行</td><td></td></tr><tr><td>-t</td><td></td><td>为容器重新分配一个伪输入终端</td><td></td></tr><tr><td>-d</td><td></td><td>后台运行容器，并返回容器ID</td><td></td></tr><tr><td>–name</td><td></td><td>为容器指定一个名称 –name 容器名字</td><td></td></tr><tr><td>–dns</td><td></td><td>容器的DNS，默认与宿主一样 –dns 8.8.8.8</td><td></td></tr><tr><td>-e</td><td></td><td>传递环境变量 -e MYSQL_ROOT_PASSWORD=123456</td><td></td></tr><tr><td>start</td><td></td><td>启动一个容器 docker start 容器名称或ID</td><td></td></tr><tr><td>stop</td><td></td><td>停止一个容器 docker stop 容器名称或ID</td><td></td></tr><tr><td>restart</td><td></td><td>重启一个容器 docker restart 容器名称或ID</td><td></td></tr><tr><td>rm</td><td></td><td>删除一个容器 docker rm 容器名称或ID</td><td></td></tr><tr><td>-f</td><td></td><td>通过SIGKILL强行删除一个运行中的容器</td><td></td></tr><tr><td>-l</td><td></td><td>移除容器的网络连接而非容器本身</td><td></td></tr><tr><td>-v</td><td></td><td>删除与容器关联的卷</td><td></td></tr><tr><td>pause</td><td></td><td>暂停容器</td><td></td></tr><tr><td>unpause</td><td></td><td>恢复容器</td><td></td></tr><tr><td>exec</td><td></td><td>在运行的容器中执行命令 docker exec -i -t 容器名称或ID /bin/bash</td><td></td></tr><tr><td>-i</td><td></td><td>即使没有附加也保持STDIN 打开</td><td></td></tr><tr><td>-d</td><td></td><td>在后台运行</td><td></td></tr><tr><td>-t</td><td></td><td>分配一个伪终端</td><td></td></tr></tbody></table><h3 id="容器操作" tabindex="-1"><a class="header-anchor" href="#容器操作" aria-hidden="true">#</a> 容器操作</h3><table><thead><tr><th>命令</th><th>参数</th><th>功能</th><th>示例</th></tr></thead><tbody><tr><td>ps</td><td></td><td>列出容器</td><td>docker ps</td></tr><tr><td>-a</td><td></td><td>列出所有容器包括未运行的</td><td>docker ps -a</td></tr><tr><td>logs</td><td></td><td>获取容器日志</td><td>docker log 容器名称或ID</td></tr><tr><td>-f</td><td></td><td>跟踪日志输出</td><td></td></tr><tr><td>–since</td><td></td><td>从什么时候开始</td><td>–since 2020-03-30</td></tr><tr><td>–tail</td><td></td><td>显示最新N条</td><td>–tail 10</td></tr><tr><td>-t</td><td></td><td>显示时间戳</td><td></td></tr><tr><td>attach</td><td></td><td>连接到容器</td><td></td></tr></tbody></table><h3 id="容器rootfs命令" tabindex="-1"><a class="header-anchor" href="#容器rootfs命令" aria-hidden="true">#</a> 容器rootfs命令</h3><table><thead><tr><th>命令</th><th>参数</th><th>功能</th><th>示例</th></tr></thead><tbody><tr><td>commit</td><td></td><td>从容器创建一个新镜像</td><td>docker commit 参数 容器 仓库:标签</td></tr><tr><td>-a</td><td></td><td>镜像作者 -c 作者名称</td><td></td></tr><tr><td>-c</td><td></td><td>使用Dockerfile创建镜像</td><td></td></tr><tr><td>-m</td><td></td><td>提交时的文字说明 -m “文字说明”</td><td></td></tr><tr><td>-p</td><td></td><td>在commit时暂停容器</td><td></td></tr></tbody></table>',30),b={render:function(t,d){const e=(0,s.up)("RouterLink");return(0,s.wg)(),(0,s.iD)(s.HY,null,[a,(0,s._)("nav",n,[(0,s._)("ul",null,[(0,s._)("li",null,[(0,s.Wm)(e,{to:"#问题调试"},{default:(0,s.w5)((()=>[r])),_:1})]),(0,s._)("li",null,[(0,s.Wm)(e,{to:"#docker安装软件记录"},{default:(0,s.w5)((()=>[l])),_:1}),(0,s._)("ul",null,[(0,s._)("li",null,[(0,s.Wm)(e,{to:"#redis"},{default:(0,s.w5)((()=>[c])),_:1})])])]),(0,s._)("li",null,[(0,s.Wm)(e,{to:"#mysql"},{default:(0,s.w5)((()=>[i])),_:1})]),(0,s._)("li",null,[(0,s.Wm)(e,{to:"#tomcat"},{default:(0,s.w5)((()=>[o])),_:1})]),(0,s._)("li",null,[(0,s.Wm)(e,{to:"#docker指令"},{default:(0,s.w5)((()=>[p])),_:1}),(0,s._)("ul",null,[(0,s._)("li",null,[(0,s.Wm)(e,{to:"#容器操作"},{default:(0,s.w5)((()=>[u])),_:1})]),(0,s._)("li",null,[(0,s.Wm)(e,{to:"#容器rootfs命令"},{default:(0,s.w5)((()=>[m])),_:1})])])])])]),h],64)}}}}]);